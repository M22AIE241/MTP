Hybrid RAG + Text-to-SQL System

This project implements a Hybrid Retrieval-Augmented Generation (RAG) system capable of answering natural-language questions about structured CSV datasets.

The system intelligently switches between semantic retrieval and SQL execution, providing accurate analytical and descriptive answers.

ğŸ”§ Core Components
1. ChromaDB â€” Semantic Vector Retrieval

Used to store embeddings of CSV rows and metadata, enabling natural-language semantic search.

2. DuckDB â€” Local SQL Execution

Loads all CSV files as in-memory relational tables and executes SQL generated by the LLM.

3. Ollama (Gemma 3B)

Powers:

Text-to-SQL generation

Business-friendly explanations

Hybrid reasoning using SQL + RAG context

4. Hybrid Decision Logic

Automatically decides:

SQL mode â†’ when numeric, analytical, or aggregation logic is required

RAG mode â†’ when retrieved context is sufficient for descriptive answers

5. Hybrid Answer Generation

For SQL questions, the system merges:

SQL results

Retrieved semantic context

Domain reasoning

â€¦into a single, clear, human-friendly response.

ğŸ’¬ Example Questions You Can Ask

â€œWhat are the different kinds of products we have?â€

â€œWhich Sony products exist and what is their price?â€

â€œWhat is the highest unit price?â€

â€œTell me about customers from Delhi.â€

ğŸ“ Project Structure
Hybrid_RAG/
â”‚
â”œâ”€â”€ csv_loader.py          # Loads CSVs into DuckDB
â”œâ”€â”€ csv_maker.py           # Utility for generating CSVs
â”œâ”€â”€ doc_builder.py         # Builds descriptive docs for vector DB
â”œâ”€â”€ get_embeddings.py      # Embedding helper (SentenceTransformer)
â”œâ”€â”€ index_to_chroma.py     # Indexes data into ChromaDB
â”œâ”€â”€ vectorize.py           # Vector formatting/cleanup
â”œâ”€â”€ hybrid_agent.py        # MAIN Hybrid RAG + SQL Agent
â”‚
â”œâ”€â”€ qa2_csv_exports/       # Input CSV data
â”‚   â”œâ”€â”€ customer.csv
â”‚   â”œâ”€â”€ order_items.csv
â”‚   â”œâ”€â”€ orders.csv
â”‚   â””â”€â”€ product.csv
â”‚
â”œâ”€â”€ vectordb/              # Persistent ChromaDB storage
â””â”€â”€ README.md              # Documentation
